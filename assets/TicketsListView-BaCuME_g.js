import{_ as g,r as a,o as m,c as h,w as t,a as s,n as I,b as f,t as _,d as w,e as k,f as x,F as C,g as L}from"./index-wtb1lKWq.js";const T={name:"TicketsListItemComponent",emits:["select-item"],props:{ticket:Object},methods:{chooseEvent(e){this.$emit("select-item",e.id),console.log(e)}}},b=["src"];function V(e,l,c,S,d,n){const i=a("el-text"),o=a("el-col"),r=a("el-row"),p=a("el-card");return m(),h(r,null,{default:t(()=>[s(o,null,{default:t(()=>[s(p,{class:I(["search-card",c.ticket.isSelected?"selected-card":"deselected-card"]),shadow:"hover",onClick:l[0]||(l[0]=u=>n.chooseEvent(c.ticket)),style:{"max-width":"480px"}},{header:t(()=>[s(r,null,{default:t(()=>[s(o,null,{default:t(()=>[s(i,{class:"ticket-title"},{default:t(()=>[f(_(c.ticket.title),1)]),_:1})]),_:1}),s(o,null,{default:t(()=>[s(i,{class:"ticket-place"},{default:t(()=>[f(_(c.ticket.place),1)]),_:1})]),_:1})]),_:1})]),default:t(()=>[s(r,null,{default:t(()=>[s(o,{span:12},{default:t(()=>[s(i,{class:"ticket-date"},{default:t(()=>[f(_(c.ticket.date),1)]),_:1})]),_:1}),s(o,{span:12},{default:t(()=>[s(i,{class:"ticket-price"},{default:t(()=>[f(_(c.ticket.price),1)]),_:1})]),_:1})]),_:1}),s(r,{style:{margin:"8px 0px"}},{default:t(()=>[s(o,null,{default:t(()=>[w("img",{src:c.ticket.image,style:{width:"100%"}},null,8,b)]),_:1})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})}const B=g(T,[["render",V]]),y={name:"TicketListComponent",components:{TicketsListItemComponent:B},emits:["change-tg-button-state","set-selected-item-id"],data(){return{filteredValue:"",focused:!1,tickets:[{id:1,title:"Самые известные комики",place:'Стендап бар "Патрики"',date:"22:00 28.06.2024",price:"от 1650 р",image:"https://media.ticketland.ru/images/420x270/81/7d/817d69d77f92f77fad5cbdc69e96fcce.jpg",isSelected:!1},{id:2,title:"Unki",place:'Клуб "Урбан"',date:"18:00 30.06.2024",price:"999 - 2900 р",image:"https://media.ticketland.ru/images/420x270/ed/e1/ede1b538bd7e4a601ff4afc78ea6e7fa.jpg",isSelected:!1},{id:3,title:"Ничего не бойся, я с тобой",place:"МДМ",date:"19:00 25.06.2024",price:"1300 - 10000 р",image:"https://media.ticketland.ru/images/420x270/f9/ad/f9ad2ef01e423be6a607da2af01d7b37.jpg",isSelected:!1}]}},watch:{isAnySelected(){this.isAnySelected?this.$emit("change-tg-button-state",!0):this.$emit("change-tg-button-state",!1)}},methods:{selectItem(e){this.tickets.forEach(c=>{c.id==e?c.isSelected=!c.isSelected:c.isSelected=!1});const l=this.tickets.filter(c=>c.isSelected);this.$emit("set-selected-item-id",l.length>0?l[0].id:0)},clearInput(){this.tickets.forEach(e=>{e.isSelected=!1})}},computed:{ticketsList(){return this.tickets.filter(e=>!this.filteredValue||e.title.toLowerCase().includes(this.filteredValue.toLowerCase())||e.place.toLowerCase().includes(this.filteredValue.toLowerCase()))},isAnySelected(){return this.tickets.filter(e=>e.isSelected==!0).length>0}}};function v(e,l,c,S,d,n){const i=a("el-input"),o=a("el-col"),r=a("el-row"),p=a("TicketsListItemComponent");return m(),k(C,null,[s(r,{class:"search-card"},{default:t(()=>[s(o,null,{default:t(()=>[s(i,{class:"custom-input",onFocus:l[0]||(l[0]=u=>d.focused=!0),onBlur:l[1]||(l[1]=u=>d.focused=!1),modelValue:d.filteredValue,"onUpdate:modelValue":l[2]||(l[2]=u=>d.filteredValue=u),type:"text",placeholder:"Поиск события",onClear:n.clearInput,clearable:""},null,8,["modelValue","onClear"])]),_:1})]),_:1}),n.ticketsList.length>0?(m(),h(r,{key:0,class:I(d.focused?"employee-box-with-padding":"employee-box")},{default:t(()=>[(m(!0),k(C,null,L(n.ticketsList,u=>(m(),h(p,{key:u.id,ticket:u,onSelectItem:n.selectItem},null,8,["ticket","onSelectItem"]))),128))]),_:1},8,["class"])):x("",!0)],64)}const A=g(y,[["render",v]]),D={name:"TicketsListView",components:{TicketListComponent:A},data(){return{chatData:{},selectedItemId:0}},mounted(){const e=window.Telegram.WebApp;this.chatData=e.initDataUnsafe,e.MainButton.setParams({text:"Выбрать событие",color:"#0D488C"}),e.MainButton.onClick(this.send),e.expand()},methods:{changeTgButtonState(e){const l=window.Telegram.WebApp;e?l.MainButton.show():l.MainButton.hide()},setSelectedItemId(e){this.selectedItemId=e}}};function E(e,l,c,S,d,n){const i=a("TicketListComponent");return m(),k("main",null,[s(i,{onChangeTgButtonState:n.changeTgButtonState,onSetSelectedItemId:n.setSelectedItemId},null,8,["onChangeTgButtonState","onSetSelectedItemId"])])}const M=g(D,[["render",E]]);export{M as default};
